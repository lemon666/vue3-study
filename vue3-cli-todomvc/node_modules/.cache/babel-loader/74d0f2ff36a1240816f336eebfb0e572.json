{"remainingRequest":"/Users/v_limeiwang/mygithub/vue3/demo/vue3-cli-demo/node_modules/babel-loader/lib/index.js!/Users/v_limeiwang/mygithub/vue3/demo/vue3-cli-demo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/v_limeiwang/mygithub/vue3/demo/vue3-cli-demo/node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/index.js??ref--0-1!/Users/v_limeiwang/mygithub/vue3/demo/vue3-cli-demo/src/components/Todo.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/v_limeiwang/mygithub/vue3/demo/vue3-cli-demo/src/components/Todo.vue","mtime":1593701106993},{"path":"/Users/v_limeiwang/mygithub/vue3/demo/vue3-cli-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/v_limeiwang/mygithub/vue3/demo/vue3-cli-demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/v_limeiwang/mygithub/vue3/demo/vue3-cli-demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/v_limeiwang/mygithub/vue3/demo/vue3-cli-demo/node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvdl9saW1laXdhbmcvbXlnaXRodWIvdnVlMy9kZW1vL3Z1ZTMtY2xpLWRlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgeyByZWFjdGl2ZSwgdG9SZWZzLCBjb21wdXRlZCB9IGZyb20gInZ1ZSI7CmltcG9ydCB1c2VBZGRSZW1vdmUgZnJvbSAiLi4vaG9va3MvYWRkUmVtb3ZlIjsKaW1wb3J0IHVzZU1vdXNlUG9zaXRpb24gZnJvbSAiLi4vaG9va3MvbW91c2UiOwppbXBvcnQgdXNlU2Nyb2xsIGZyb20gIi4uL2hvb2tzL3Njcm9sbCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVG9kbyIsCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHN0YXRlID0gcmVhY3RpdmUoewogICAgICB0b2RvczogW3sKICAgICAgICBpZDogMSwKICAgICAgICB0aXRsZTogIuWQg+mlrSIsCiAgICAgICAgY29tcGxldGVkOiBmYWxzZQogICAgICB9LCB7CiAgICAgICAgaWQ6IDEsCiAgICAgICAgdGl0bGU6ICLnnaHop4kiLAogICAgICAgIGNvbXBsZXRlZDogZmFsc2UKICAgICAgfV0sCiAgICAgIG5ld1RvZG86ICIiLAogICAgICBlZGl0ZWRUb2RvOiBudWxsCiAgICB9KTsKCiAgICB2YXIgX3VzZUFkZFJlbW92ZSA9IHVzZUFkZFJlbW92ZShzdGF0ZSksCiAgICAgICAgYWRkVG9kbyA9IF91c2VBZGRSZW1vdmUuYWRkVG9kbywKICAgICAgICByZW1vdmVUb2RvID0gX3VzZUFkZFJlbW92ZS5yZW1vdmVUb2RvOwoKICAgIHZhciBfdXNlTW91c2VQb3NpdGlvbiA9IHVzZU1vdXNlUG9zaXRpb24oKSwKICAgICAgICB4ID0gX3VzZU1vdXNlUG9zaXRpb24ueCwKICAgICAgICB5ID0gX3VzZU1vdXNlUG9zaXRpb24ueTsKCiAgICB2YXIgX3VzZVNjcm9sbCA9IHVzZVNjcm9sbCgpLAogICAgICAgIHRvcCA9IF91c2VTY3JvbGwudG9wOwoKICAgIHZhciByZW1haW5pbmcgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdGF0ZS50b2Rvcy5maWx0ZXIoZnVuY3Rpb24gKHRvZG8pIHsKICAgICAgICByZXR1cm4gIXRvZG8uY29tcGxldGVkOwogICAgICB9KS5sZW5ndGg7CiAgICB9KTsKICAgIHZhciBhbGxEb25lID0gY29tcHV0ZWQoewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gcmVtYWluaW5nLnZhbHVlID09PSAwOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgIHN0YXRlLnRvZG9zLmZvckVhY2goZnVuY3Rpb24gKHRvZG8pIHsKICAgICAgICAgIHRvZG8uY29tcGxldGVkID0gdmFsdWU7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwoKICAgIGZ1bmN0aW9uIGVkaXRUb2RvKHRvZG8pIHsKICAgICAgc3RhdGUuYmVmb3JlRWRpdENhY2hlID0gdG9kby50aXRsZTsKICAgICAgc3RhdGUuZWRpdGVkVG9kbyA9IHRvZG87CiAgICB9CgogICAgZnVuY3Rpb24gZG9uZUVkaXQodG9kbykgewogICAgICBpZiAoIXN0YXRlLmVkaXRlZFRvZG8pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHN0YXRlLmVkaXRlZFRvZG8gPSBudWxsOwogICAgICB0b2RvLnRpdGxlID0gdG9kby50aXRsZS50cmltKCk7CgogICAgICBpZiAoIXRvZG8udGl0bGUpIHsKICAgICAgICByZW1vdmVUb2RvKHRvZG8pOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY2FuY2VsRWRpdCh0b2RvKSB7CiAgICAgIHN0YXRlLmVkaXRlZFRvZG8gPSBudWxsOwogICAgICB0b2RvLnRpdGxlID0gc3RhdGUuYmVmb3JlRWRpdENhY2hlOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZUNvbXBsZXRlZCgpIHsKICAgICAgc3RhdGUudG9kb3MgPSBzdGF0ZS50b2Rvcy5maWx0ZXIoZnVuY3Rpb24gKHRvZG8pIHsKICAgICAgICByZXR1cm4gdG9kby5jb21wbGV0ZWQ7CiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRvUmVmcyhzdGF0ZSkpLCB7fSwgewogICAgICBhZGRUb2RvOiBhZGRUb2RvLAogICAgICByZW1vdmVUb2RvOiByZW1vdmVUb2RvLAogICAgICBlZGl0VG9kbzogZWRpdFRvZG8sCiAgICAgIHJlbWFpbmluZzogcmVtYWluaW5nLAogICAgICBhbGxEb25lOiBhbGxEb25lLAogICAgICByZW1vdmVDb21wbGV0ZWQ6IHJlbW92ZUNvbXBsZXRlZCwKICAgICAgZG9uZUVkaXQ6IGRvbmVFZGl0LAogICAgICBjYW5jZWxFZGl0OiBjYW5jZWxFZGl0LAogICAgICB4OiB4LAogICAgICB5OiB5LAogICAgICB0b3A6IHRvcAogICAgfSk7CiAgfSwKICBkaXJlY3RpdmVzOiB7CiAgICAidG9kby1mb2N1cyI6IGZ1bmN0aW9uIHRvZG9Gb2N1cyhlbCwgYmluZGluZykgewogICAgICBpZiAoYmluZGluZy52YWx1ZSkgewogICAgICAgIGVsLmZvY3VzKCk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/v_limeiwang/mygithub/vue3/demo/vue3-cli-demo/src/components/Todo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"todoapp\">\n    <teleport to=\"#modal\">\n      <div class=\"modal\" v-if=\"x<10||y<10\"></div>\n    </teleport>\n    <header class=\"header\" :class=\"{fixed:top>130}\">\n      <h1>Vue3 todos</h1>\n      <input\n        class=\"new-todo\"\n        placeholder=\"What needs to be done?\"\n        v-model=\"newTodo\"\n        @keyup.enter=\"addTodo\"\n      />\n    </header>\n    <section class=\"main\" v-show=\"todos.length\" v-cloak>\n      <input class=\"toggle-all\" type=\"checkbox\" v-model=\"allDone\" />\n      <ul class=\"todo-list\">\n        <li\n          v-for=\"todo in todos\"\n          :key=\"todo.id\"\n          class=\"todo\"\n          :class=\"{ completed: todo.completed, editing: todo == editedTodo }\"\n        >\n          <div class=\"view\">\n            <input class=\"toggle\" type=\"checkbox\" v-model=\"todo.completed\" />\n            <label @dblclick=\"editTodo(todo)\">{{ todo.title }}</label>\n            <button class=\"destroy\" @click=\"removeTodo(todo)\"></button>\n          </div>\n          <input\n            class=\"edit\"\n            type=\"text\"\n            v-model=\"todo.title\"\n            v-todo-focus=\"todo == editedTodo\"\n            @blur=\"doneEdit(todo)\"\n            @keyup.enter=\"doneEdit(todo)\"\n            @keyup.esc=\"cancelEdit(todo)\"\n          />\n        </li>\n      </ul>\n    </section>\n    <footer class=\"footer\">\n      <span class=\"todo-count\">\n        <strong>{{ remaining }}</strong> left\n      </span>\n      <button\n        class=\"clear-completed\"\n        @click=\"removeCompleted\"\n        v-show=\"todos.length > remaining\"\n      >Clear completed</button>\n    </footer>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, computed } from \"vue\";\nimport useAddRemove from \"../hooks/addRemove\";\nimport useMousePosition from \"../hooks/mouse\";\nimport useScroll from \"../hooks/scroll\";\nexport default {\n  name: \"Todo\",\n\n  setup() {\n    const state = reactive({\n      todos: [\n        {\n          id: 1,\n          title: \"吃饭\",\n          completed: false\n        },\n        {\n          id: 1,\n          title: \"睡觉\",\n          completed: false\n        }\n      ],\n      newTodo: \"\",\n      editedTodo: null\n    });\n\n    const { addTodo, removeTodo } = useAddRemove(state);\n\n    const { x, y } = useMousePosition();\n\n    const { top } = useScroll();\n\n    const remaining = computed(\n      () => state.todos.filter(todo => !todo.completed).length\n    );\n\n    const allDone = computed({\n      get: function() {\n        return remaining.value === 0;\n      },\n      set: function(value) {\n        state.todos.forEach(function(todo) {\n          todo.completed = value;\n        });\n      }\n    });\n\n    function editTodo(todo) {\n      state.beforeEditCache = todo.title;\n      state.editedTodo = todo;\n    }\n\n    function doneEdit(todo) {\n      if (!state.editedTodo) {\n        return;\n      }\n      state.editedTodo = null;\n      todo.title = todo.title.trim();\n      if (!todo.title) {\n        removeTodo(todo);\n      }\n    }\n\n    function cancelEdit(todo) {\n      state.editedTodo = null;\n      todo.title = state.beforeEditCache;\n    }\n\n    function removeCompleted() {\n      state.todos = state.todos.filter(todo => todo.completed);\n    }\n\n    return {\n      ...toRefs(state),\n      addTodo,\n      removeTodo,\n      editTodo,\n      remaining,\n      allDone,\n      removeCompleted,\n      doneEdit,\n      cancelEdit,\n      x,\n      y,\n      top\n    };\n  },\n\n  directives: {\n    \"todo-focus\": function(el, binding) {\n      if (binding.value) {\n        el.focus();\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n.modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.7);\n  z-index: 9999;\n}\n.header.fixed {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  z-index: 100;\n}\n</style>"],"sourceRoot":""}]}